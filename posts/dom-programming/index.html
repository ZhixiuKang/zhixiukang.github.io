<!DOCTYPE html>
<html lang="zh-cn">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="ä¿®">
    <meta name="description" content="ä¿®çš„ä¸ªäººä¸»é¡µ">
    <meta name="keywords" content="Zhixiu Kang, åº·çŸ¥ä¿®, ä¿®,ç¬”è®°">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DOMç¼–ç¨‹å’Œæ“ä½œè·¨çº¿ç¨‹"/>
<meta name="twitter:description" content="è·å–ä»»æ„å…ƒç´  æœ‰å¾ˆå¤š API window.idxxx; // æˆ–è€…ç›´æ¥idxxx document.getElementById(&#34;idxxx&#34;); document.getElementsByTagName(&#34;div&#34;)[0]; document.getElementsByClassName(&#34;red&#34;)[0]; document.querySelector(&#34;#idxxx&#34;); // è®°å¾—åŠ # document.querySelectorAll(&#34;.red&#34;)[0]; ç”¨å“ªä¸€ä¸ª  å·¥ä½œä¸­ç”¨querySelectorå’ŒquerySelectorAll
ä¾‹å­:document.querySelectorAll(&#39;div&gt;span:nth-child(2)&#39;)
  åš demo ç›´æ¥ç”¨idxxxï¼Œåƒä¸‡åˆ«è®©äººå‘ç° hhh
  è¦å…¼å®¹ IE çš„å¯æ€œè™«æ‰ç”¨getElement(s)ByXXX
 è·å–ç‰¹å®šå…ƒç´  è·å– html å…ƒç´  document.documentElement; è·å– head å…ƒç´  document.head; è·å– body å…ƒç´  document.body; è·å–çª—å£  çª—å£ä¸æ˜¯å…ƒç´ 
 window; è·å–æ‰€æœ‰å…ƒç´  document.all; // false  è¿™ä¸ª document.all æ˜¯ä¸ªå¥‡è‘©ï¼Œç¬¬ 6 ä¸ª falsy å€¼ã€‚åŸå› æ˜¯è¿‡å»ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ IE æµè§ˆå™¨ã€‚
 å…ƒç´ çš„ 6 å±‚åŸå‹é“¾ æŠ“ä¸€åª div å¯¹è±¡æ¥çœ‹çœ‹ console.dir(div1); // æŸ¥çœ‹åŸå‹é“¾  Chrome æ˜¾ç¤ºé”™äº†"/>

    <meta property="og:title" content="DOMç¼–ç¨‹å’Œæ“ä½œè·¨çº¿ç¨‹" />
<meta property="og:description" content="è·å–ä»»æ„å…ƒç´  æœ‰å¾ˆå¤š API window.idxxx; // æˆ–è€…ç›´æ¥idxxx document.getElementById(&#34;idxxx&#34;); document.getElementsByTagName(&#34;div&#34;)[0]; document.getElementsByClassName(&#34;red&#34;)[0]; document.querySelector(&#34;#idxxx&#34;); // è®°å¾—åŠ # document.querySelectorAll(&#34;.red&#34;)[0]; ç”¨å“ªä¸€ä¸ª  å·¥ä½œä¸­ç”¨querySelectorå’ŒquerySelectorAll
ä¾‹å­:document.querySelectorAll(&#39;div&gt;span:nth-child(2)&#39;)
  åš demo ç›´æ¥ç”¨idxxxï¼Œåƒä¸‡åˆ«è®©äººå‘ç° hhh
  è¦å…¼å®¹ IE çš„å¯æ€œè™«æ‰ç”¨getElement(s)ByXXX
 è·å–ç‰¹å®šå…ƒç´  è·å– html å…ƒç´  document.documentElement; è·å– head å…ƒç´  document.head; è·å– body å…ƒç´  document.body; è·å–çª—å£  çª—å£ä¸æ˜¯å…ƒç´ 
 window; è·å–æ‰€æœ‰å…ƒç´  document.all; // false  è¿™ä¸ª document.all æ˜¯ä¸ªå¥‡è‘©ï¼Œç¬¬ 6 ä¸ª falsy å€¼ã€‚åŸå› æ˜¯è¿‡å»ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ IE æµè§ˆå™¨ã€‚
 å…ƒç´ çš„ 6 å±‚åŸå‹é“¾ æŠ“ä¸€åª div å¯¹è±¡æ¥çœ‹çœ‹ console.dir(div1); // æŸ¥çœ‹åŸå‹é“¾  Chrome æ˜¾ç¤ºé”™äº†" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://zhixiukang.com/posts/dom-programming/" />
<meta property="article:published_time" content="2020-03-07T15:21:33-08:00" />
<meta property="article:modified_time" content="2020-03-07T15:21:33-08:00" />


    
      <base href="http://zhixiukang.com/posts/dom-programming/">
    
    <title>
DOMç¼–ç¨‹å’Œæ“ä½œè·¨çº¿ç¨‹ Â· ä¿®çš„ä¸ªäººç½‘ç«™
</title>

    
      <link rel="canonical" href="http://zhixiukang.com/posts/dom-programming/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="http://zhixiukang.com/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    

    
    
    <link rel="icon" type="image/png" href="http://zhixiukang.com/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://zhixiukang.com/img/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.62.1" />
  </head>

  
  
  <body class="colorscheme-light">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://zhixiukang.com/">
      ä¿®çš„ä¸ªäººç½‘ç«™
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://zhixiukang.com/posts/">æŠ€æœ¯æ–‡ç« </a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://zhixiukang.com/explore/">å…´è¶£å­¦ä¹ </a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://zhixiukang.com/bucket-list/">Bucket List</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://zhixiukang.com/tags/">åˆ†ç±»</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://zhixiukang.com/about/">è”ç³»æˆ‘</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
<section class="container post">
  <article>
    <header>
      <div class="post-title">
        <h1 class="title">DOMç¼–ç¨‹å’Œæ“ä½œè·¨çº¿ç¨‹</h1>
      </div>
      <div class="post-meta">
        <div class="date">
          <span class="posted-on">
            <i class="fas fa-calendar"></i>
            <time datetime='2020-03-07T15:21:33-08:00'>
              March 7, 2020
            </time>
          </span>
          
        </div>
        <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="http://zhixiukang.com/categories/tech/">Tech</a></div>

        <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="http://zhixiukang.com/tags/javascript/">JavaScript</a>
      <span class="separator">â€¢</span>
    <a href="http://zhixiukang.com/tags/javascript%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3/">JavaScriptç¼–ç¨‹æ¥å£</a></div>

      </div>
    </header>

    <div>
      <h1 id="heading">è·å–ä»»æ„å…ƒç´ </h1>
<h2 id="-api">æœ‰å¾ˆå¤š API</h2>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">window</span>.idxxx; <span style="color:#007f7f">// æˆ–è€…ç›´æ¥idxxx
</span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">document</span>.getElementById(<span style="color:#0ff;font-weight:bold">&#34;idxxx&#34;</span>);
<span style="color:#fff;font-weight:bold">document</span>.getElementsByTagName(<span style="color:#0ff;font-weight:bold">&#34;div&#34;</span>)[<span style="color:#ff0;font-weight:bold">0</span>];
<span style="color:#fff;font-weight:bold">document</span>.getElementsByClassName(<span style="color:#0ff;font-weight:bold">&#34;red&#34;</span>)[<span style="color:#ff0;font-weight:bold">0</span>];
<span style="color:#fff;font-weight:bold">document</span>.querySelector(<span style="color:#0ff;font-weight:bold">&#34;#idxxx&#34;</span>); <span style="color:#007f7f">// è®°å¾—åŠ #
</span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">document</span>.querySelectorAll(<span style="color:#0ff;font-weight:bold">&#34;.red&#34;</span>)[<span style="color:#ff0;font-weight:bold">0</span>];
</code></pre></div><h2 id="heading-1">ç”¨å“ªä¸€ä¸ª</h2>
<blockquote>
<p>å·¥ä½œä¸­ç”¨<code>querySelector</code>å’Œ<code>querySelectorAll</code></p>
<p>ä¾‹å­:<code>document.querySelectorAll('div&gt;span:nth-child(2)')</code></p>
</blockquote>
<blockquote>
<p>åš demo ç›´æ¥ç”¨<code>idxxx</code>ï¼Œåƒä¸‡åˆ«è®©äººå‘ç° hhh</p>
</blockquote>
<blockquote>
<p>è¦å…¼å®¹ IE çš„å¯æ€œè™«æ‰ç”¨<code>getElement(s)ByXXX</code></p>
</blockquote>
<h1 id="heading-2">è·å–ç‰¹å®šå…ƒç´ </h1>
<h2 id="-html-">è·å– html å…ƒç´ </h2>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">document</span>.documentElement;
</code></pre></div><h2 id="-head-">è·å– head å…ƒç´ </h2>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">document</span>.head;
</code></pre></div><h2 id="-body-">è·å– body å…ƒç´ </h2>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">document</span>.body;
</code></pre></div><h2 id="heading-3">è·å–çª—å£</h2>
<blockquote>
<p>çª—å£ä¸æ˜¯å…ƒç´ </p>
</blockquote>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">window</span>;
</code></pre></div><h2 id="heading-4">è·å–æ‰€æœ‰å…ƒç´ </h2>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">document</span>.all; <span style="color:#007f7f">// false
</span></code></pre></div><blockquote>
<p>è¿™ä¸ª document.all æ˜¯ä¸ªå¥‡è‘©ï¼Œç¬¬ 6 ä¸ª falsy å€¼ã€‚åŸå› æ˜¯è¿‡å»ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ IE æµè§ˆå™¨ã€‚</p>
</blockquote>
<h1 id="-6-">å…ƒç´ çš„ 6 å±‚åŸå‹é“¾</h1>
<h2 id="-div-">æŠ“ä¸€åª div å¯¹è±¡æ¥çœ‹çœ‹</h2>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">console.dir(div1); <span style="color:#007f7f">// æŸ¥çœ‹åŸå‹é“¾
</span></code></pre></div><blockquote>
<p>Chrome æ˜¾ç¤ºé”™äº†</p>
</blockquote>
<ul>
<li>è‡ªèº«å±æ€§: <code>className</code>ã€<code>id</code>ã€<code>style</code>ç­‰ç­‰</li>
<li>ç¬¬ä¸€å±‚åŸå‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLDivElement">HTMLDivElement.prototype</a>
<blockquote>
<p>è¿™é‡Œé¢æ˜¯æ‰€æœ‰ div å…±æœ‰çš„å±æ€§ï¼Œä¸ç”¨ç»†çœ‹</p>
</blockquote>
</li>
<li>ç¬¬äºŒå±‚åŸå‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement">HTMLElement.prototype</a>
<blockquote>
<p>è¿™é‡Œé¢æ˜¯æ‰€æœ‰ HTML æ ‡ç­¾å…±æœ‰çš„å±æ€§ï¼Œä¸ç”¨ç»†çœ‹</p>
</blockquote>
</li>
<li>ç¬¬ä¸‰å±‚åŸå‹<code>Element.prototype</code>
<blockquote>
<p>è¿™é‡Œé¢æ˜¯æ‰€æœ‰ HTML æ ‡ç­¾å…±æœ‰çš„å±æ€§ï¼Œä½ ä¸ä¼šä»¥ä¸ºæµè§ˆå™¨åªèƒ½å±•ç¤º HTML å§</p>
</blockquote>
</li>
<li>ç¬¬å››å±‚åŸå‹<code>Node.prototype</code>
<blockquote>
<p>è¿™é‡Œé¢æ˜¯æ‰€æœ‰èŠ‚ç‚¹å…±æœ‰çš„å±æ€§ï¼ŒèŠ‚ç‚¹åŒ…æ‹¬ XML æ ‡ç­¾æ–‡æœ¬æ³¨é‡Šã€HTML æ ‡ç­¾æ–‡æœ¬æ³¨é‡Šç­‰ç­‰</p>
</blockquote>
</li>
<li>ç¬¬äº”å±‚åŸå‹<code>EventTarget.prototype</code>
<blockquote>
<p>é‡Œé¢æœ€é‡è¦çš„å‡½æ•°å±æ€§æ˜¯<code>addEventListener</code></p>
</blockquote>
</li>
<li>æœ€åä¸€å±‚åŸå‹å°±æ˜¯<code>Object.prototype</code>äº†</li>
</ul>
<h2 id="div-">div åŸå‹é“¾</h2>
<p><img src="http://zhixiukang.com/images/%E6%88%AA%E5%B1%8F2020-04-2018.45.47.png" alt=""></p>
<blockquote>
<p>èŠ‚ç‚¹å’Œå…ƒç´ çš„åŒºåˆ«: èŠ‚ç‚¹ Node åŒ…æ‹¬(Element å’Œ Text ç­‰)ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType">Node.nodeType - Web API æ¥å£å‚è€ƒ | MDN</a></p>
</blockquote>
<h1 id="heading-5">å…ƒç´ çš„å¢åˆ æ”¹æŸ¥</h1>
<h2 id="heading-6">å¢</h2>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ ‡ç­¾èŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">let</span> div1 = <span style="color:#fff;font-weight:bold">document</span>.createElement(<span style="color:#0ff;font-weight:bold">&#34;div&#34;</span>);
<span style="color:#fff;font-weight:bold">document</span>.createElement(<span style="color:#0ff;font-weight:bold">&#34;style&#34;</span>);
<span style="color:#fff;font-weight:bold">document</span>.createElement(<span style="color:#0ff;font-weight:bold">&#34;script&#34;</span>);
<span style="color:#fff;font-weight:bold">document</span>.createElement(<span style="color:#0ff;font-weight:bold">&#34;li&#34;</span>);
</code></pre></div><ul>
<li>åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">text1 = <span style="color:#fff;font-weight:bold">document</span>.createTextNode(<span style="color:#0ff;font-weight:bold">&#34;Hi there&#34;</span>);
</code></pre></div><ul>
<li>æ ‡ç­¾é‡Œé¢æ’å…¥æ–‡æœ¬</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">div1.appendChild(text1);
div1.innerText = <span style="color:#0ff;font-weight:bold">&#34;Hi there&#34;</span>; <span style="color:#007f7f">// æˆ–è€… div1.textContent = &#39;Hi there&#39;
</span><span style="color:#007f7f"></span><span style="color:#007f7f">// ä½†æ˜¯ä¸èƒ½ç”¨ div1.appendChild(â€˜Hi thereâ€™)
</span></code></pre></div><ul>
<li>æ’å…¥é¡µé¢ä¸­
<blockquote>
<p>ä½ åˆ›å»ºçš„æ ‡ç­¾é»˜è®¤å¤„äº JS çº¿ç¨‹ä¸­,ä½ å¿…é¡»æŠŠå®ƒæ’åˆ° head æˆ–è€… body é‡Œé¢ï¼Œå®ƒæ‰ä¼šç”Ÿæ•ˆ</p>
</blockquote>
</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">document</span>.body.appendChild(div);
<span style="color:#007f7f">// æˆ–è€… å·²åœ¨é¡µé¢ä¸­çš„å…ƒç´ .appendChild(div)
</span></code></pre></div><h2 id="heading-7">åˆ </h2>
<ul>
<li>ä¸¤ç§æ–¹æ³•</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#007f7f">// æ—§æ–¹æ³•
</span><span style="color:#007f7f"></span>parentNode.removeChild(childNode); <span style="color:#007f7f">// ç”¨çˆ¶èŠ‚ç‚¹åˆ å­èŠ‚ç‚¹ï¼Œå¾ˆå‚»
</span><span style="color:#007f7f"></span><span style="color:#007f7f">// æ–°æ–¹æ³•
</span><span style="color:#007f7f"></span>childNode.remove();
</code></pre></div><blockquote>
<p>å¦‚æœä¸€ä¸ª node è¢«ç§»å‡ºé¡µé¢(DOM æ ‘)ï¼Œé‚£ä¹ˆå®ƒè¿˜å¯ä»¥å†æ¬¡å›åˆ°é¡µé¢ä¸­å—ï¼Ÿå¯ä»¥ï¼Œè‡ªå·±è¯•è¯•ã€‚</p>
</blockquote>
<h2 id="heading-8">æ”¹</h2>
<h3 id="heading-9">æ”¹å±æ€§</h3>
<ul>
<li>å†™æ ‡å‡†å±æ€§</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#007f7f">// æ”¹class
</span><span style="color:#007f7f"></span>div.className = <span style="color:#0ff;font-weight:bold">&#34;red blue&#34;</span>; <span style="color:#007f7f">// å…¨è¦†ç›–, æ—§çš„
</span><span style="color:#007f7f"></span><span style="color:#007f7f">// æ”¹class
</span><span style="color:#007f7f"></span>div.classList.add(<span style="color:#0ff;font-weight:bold">&#34;red&#34;</span>);
<span style="color:#007f7f">// æ”¹style
</span><span style="color:#007f7f"></span>div.style = <span style="color:#0ff;font-weight:bold">&#34;width:100px;color:blue&#34;</span>; <span style="color:#007f7f">// æ—§çš„
</span><span style="color:#007f7f"></span><span style="color:#007f7f">// æ”¹styleçš„ä¸€éƒ¨åˆ†
</span><span style="color:#007f7f"></span>div.style.width = <span style="color:#0ff;font-weight:bold">&#34;200px&#34;</span>;
<span style="color:#007f7f">// æ³¨æ„å¤§å°å†™
</span><span style="color:#007f7f"></span>div.style.backgroundColor = <span style="color:#0ff;font-weight:bold">&#34;white&#34;</span>;
<span style="color:#007f7f">// æ”¹data-*å±æ€§, æ—§çš„
</span><span style="color:#007f7f"></span>div.setAttribute(<span style="color:#0ff;font-weight:bold">&#34;data-x&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;test&#34;</span>);
div.getAttribute(<span style="color:#0ff;font-weight:bold">&#34;data-x&#34;</span>);
div.dataset.x;
div.dataset.x = <span style="color:#0ff;font-weight:bold">&#34;Alice&#34;</span>;
</code></pre></div><ul>
<li>è¯»æ ‡å‡†å±æ€§</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">div.classList; <span style="color:#007f7f">// æˆ–è€… a.href
</span><span style="color:#007f7f"></span>div.getAttribute(<span style="color:#0ff;font-weight:bold">&#34;class&#34;</span>); <span style="color:#007f7f">// æˆ–è€… a.getAttribute(&#34;href&#34;)
</span><span style="color:#007f7f"></span><span style="color:#007f7f">// ç¬¬äºŒç§æ–¹æ³•å¯ä»¥ç¡®ä¿è·å¾—ä½ æƒ³è¦çš„ï¼Œæ¯”è¾ƒä¿é™©
</span></code></pre></div><blockquote>
<p>ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ï¼Œä½†å€¼å¯èƒ½ç¨å¾®æœ‰äº›ä¸åŒ</p>
</blockquote>
<h3 id="heading-10">æ”¹äº‹ä»¶å¤„ç†å‡½æ•°</h3>
<ul>
<li><code>div.onclick</code>é»˜è®¤ä¸º<code>null</code>
<blockquote>
<p>é»˜è®¤ç‚¹å‡»<code>div</code>ä¸ä¼šæœ‰ä»»ä½•äº‹æƒ…å‘ç”Ÿï¼Œä½†æ˜¯å¦‚æœä½ æŠŠ<code>div.onclick</code>æ”¹ä¸ºä¸€ä¸ªå‡½æ•°<code>fn</code>ï¼Œé‚£ä¹ˆç‚¹å‡»<code>div</code>çš„æ—¶å€™ï¼Œæµè§ˆå™¨å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯è¿™æ ·è°ƒç”¨çš„:<code>fn.call(div, event)</code></p>
<p><code>div</code>ä¼šè¢«å½“åš<code>this</code>ï¼Œ<code>event</code>åˆ™åŒ…å«äº†ç‚¹å‡»äº‹ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¦‚åæ ‡</p>
</blockquote>
</li>
<li><code>div.addEventListener</code>
<blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener">EventTarget.addEventListener() | MDN</a></p>
</blockquote>
</li>
</ul>
<h3 id="heading-11">æ”¹å†…å®¹</h3>
<ul>
<li>æ”¹æ–‡æœ¬å†…å®¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">div.innerText = <span style="color:#0ff;font-weight:bold">&#34;xxx&#34;</span>;
div.textContent = <span style="color:#0ff;font-weight:bold">&#34;xxx&#34;</span>;
</code></pre></div><blockquote>
<p>ä¸¤è€…å‡ ä¹æ²¡æœ‰åŒºåˆ«</p>
</blockquote>
<ul>
<li>æ”¹ HTML å†…å®¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">div.innerHTML = <span style="color:#0ff;font-weight:bold">&#34;&lt;strong&gt;content here&lt;/strong&gt;&#34;</span>;
</code></pre></div><ul>
<li>æ”¹æ ‡ç­¾</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">div.innerHTML = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>; <span style="color:#007f7f">// å…ˆæ¸…ç©º
</span><span style="color:#007f7f"></span>div.appendChild(div2); <span style="color:#007f7f">// å†åŠ å†…å®¹
</span></code></pre></div><h3 id="heading-12">æ”¹çˆ¶èŠ‚ç‚¹</h3>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">newParent.appendChild(div);
</code></pre></div><h2 id="heading-13">æŸ¥</h2>
<ul>
<li>æŸ¥çˆ¶èŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">node.parentNode; <span style="color:#007f7f">// æˆ–è€… node.parentElement
</span></code></pre></div><ul>
<li>æŸ¥ç¥–å…ˆèŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">node.parentNode.parentNode;
</code></pre></div><ul>
<li>æŸ¥å­èŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">node.childNodes; <span style="color:#007f7f">// æˆ–è€…node.children
</span></code></pre></div><blockquote>
<p>åŒºåˆ«: å‰é¢æ˜¯åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹çš„ï¼Œåé¢æ˜¯ä¸åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹çš„</p>
</blockquote>
<ul>
<li>æŸ¥å…„å¼ŸèŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">node.parentNode.childNodes; <span style="color:#007f7f">// è¿˜è¦æ’é™¤è‡ªå·±
</span><span style="color:#007f7f"></span>node.parentNode.children; <span style="color:#007f7f">// è¿˜è¦æ’é™¤è‡ªå·±
</span></code></pre></div><div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">let</span> siblings = [];
<span style="color:#fff;font-weight:bold">let</span> arr = div2.parentElement.children; <span style="color:#007f7f">// è·å¾—æ‰€æœ‰å­èŠ‚ç‚¹
</span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; c.length; i++) {
  <span style="color:#fff;font-weight:bold">if</span> (arr[i] !== div2) {
    <span style="color:#007f7f">// æ’é™¤è‡ªå·±
</span><span style="color:#007f7f"></span>    sibling.push(arr[i]);
  }
}
</code></pre></div><ul>
<li>æŸ¥æ‰¾é¦–å°¾èŠ‚ç‚¹å’Œå…¶ä»–ç‰¹å®šå…„å¼ŸèŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">node.firstChild; <span style="color:#007f7f">// æŸ¥é¦–èŠ‚ç‚¹
</span><span style="color:#007f7f"></span>node.lastChild; <span style="color:#007f7f">// æŸ¥å°¾èŠ‚ç‚¹
</span><span style="color:#007f7f"></span>node.previousSibling; <span style="color:#007f7f">// æŸ¥ä¸Šä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
</span><span style="color:#007f7f"></span>node.nextSibling; <span style="color:#007f7f">// æŸ¥ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
</span></code></pre></div><ul>
<li>éå†ä¸€ä¸ª div é‡Œé¢çš„æ‰€æœ‰å…ƒç´ </li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">travel = (node, fn) =&gt; {
  fn(node);
  <span style="color:#fff;font-weight:bold">if</span> (node.children) {
    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; node.children.length; i++) {
      travel(node.children[i], fn);
    }
  }
};
travel(div1, (node) =&gt; console.log(node));
</code></pre></div><h1 id="dom-">DOM æ“ä½œè·¨çº¿ç¨‹</h1>
<h2 id="heading-14">è·¨çº¿ç¨‹æ“ä½œ</h2>
<h3 id="heading-15">å„çº¿ç¨‹å„å¸å…¶èŒ</h3>
<ul>
<li>JS å¼•æ“ä¸èƒ½æ“ä½œé¡µé¢ï¼Œåªèƒ½æ“ä½œ JS</li>
<li>æ¸²æŸ“å¼•æ“ä¸èƒ½æ“ä½œ JSï¼Œåªèƒ½æ“ä½œé¡µé¢</li>
</ul>
<h3 id="heading-16">è·¨çº¿ç¨‹é€šä¿¡</h3>
<blockquote>
<p><code>document.body.appendChild(div1)</code>è¿™å¥è¯æ˜¯å¦‚ä½•æ”¹å˜é¡µé¢çš„ï¼Ÿ</p>
</blockquote>
<ul>
<li>å½“æµè§ˆå™¨å‘ç° JS åœ¨ body é‡Œé¢åŠ äº†ä¸ª div1 å¯¹è±¡</li>
<li>æµè§ˆå™¨å°±ä¼šé€šçŸ¥æ¸²æŸ“å¼•æ“åœ¨é¡µé¢é‡Œä¹Ÿæ–°å¢ä¸€ä¸ª div å…ƒç´ </li>
<li>æ–°å¢çš„ div å…ƒç´ æ‰€æœ‰å±æ€§éƒ½ç…§æŠ„ div1 å¯¹è±¡</li>
</ul>
<h3 id="heading-17">å›¾ç¤ºè·¨çº¿ç¨‹æ“ä½œ</h3>
<p><img src="http://zhixiukang.com/images/%E6%88%AA%E5%B1%8F2020-04-2022.12.13.png" alt=""></p>
<h2 id="heading-18">æ’å…¥æ–°æ ‡ç­¾çš„å®Œæ•´è¿‡ç¨‹</h2>
<h3 id="-div1-">åœ¨ div1 æ”¾å…¥é¡µé¢ä¹‹å‰</h3>
<ul>
<li>ä½ å¯¹ div1 æ‰€æœ‰çš„æ“ä½œéƒ½å±äº JS çº¿ç¨‹å†…çš„æ“ä½œ</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">let</span> div1 = <span style="color:#fff;font-weight:bold">document</span>.createElement(<span style="color:#0ff;font-weight:bold">&#34;div&#34;</span>);
div1.textContent = <span style="color:#0ff;font-weight:bold">&#34;hi&#34;</span>;
</code></pre></div><h3 id="-div1--1">æŠŠ div1 æ”¾å…¥é¡µé¢ä¹‹æ—¶</h3>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#fff;font-weight:bold">document</span>.body.appendChild(div1);
</code></pre></div><ul>
<li>æµè§ˆå™¨ä¼šå‘ç° JS çš„æ„å›¾ï¼Œå°±ä¼šé€šçŸ¥æ¸²æŸ“çº¿ç¨‹åœ¨é¡µé¢ä¸­æ¸²æŸ“ div1 å¯¹åº”çš„å…ƒç´ </li>
</ul>
<h3 id="-div1--2">æŠŠ div1 æ”¾å…¥é¡µé¢ä¹‹å</h3>
<ul>
<li>ä½ å¯¹ div1 çš„æ“ä½œéƒ½æœ‰å¯èƒ½ä¼šè§¦å‘é‡æ–°æ¸²æŸ“</li>
<li>å¦‚æœä½ è¿ç»­å¯¹ div1 å¤šæ¬¡æ“ä½œï¼Œæµè§ˆå™¨å¯èƒ½ä¼šåˆå¹¶æˆä¸€æ¬¡æ“ä½œï¼Œä¹Ÿå¯èƒ½ä¸ä¼šï¼Œè¯¦æƒ…è§ä¹‹å‰çš„åšå®¢: <a href="http://zhixiukang.com/posts/browser-rendering/">CSS åŠ¨ç”»çš„åŸç†å’Œæµè§ˆå™¨æ¸²æŸ“åŸç†</a>
<blockquote>
<p>å¯ç¤º: å¯ä»¥ç”¨'çœ‹ä¼¼æ— ç”¨çš„ä»£ç &rsquo;, æ¯”å¦‚è·å–ä¸€ä¸‹é¡µé¢çš„ width, å¼ºåˆ¶æµè§ˆå™¨å¤šæ¬¡æ¸²æŸ“ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="heading-19">å±æ€§åŒæ­¥</h2>
<h3 id="heading-20">æ ‡å‡†å±æ€§</h3>
<ul>
<li>å¯¹ div1 çš„æ ‡å‡†å±æ€§çš„ä¿®æ”¹ï¼Œä¼šè¢«æµè§ˆå™¨åŒæ­¥åˆ°é¡µé¢ä¸­ï¼Œæ¯”å¦‚<code>id</code>ã€<code>className</code>ã€<code>title</code>ç­‰</li>
</ul>
<h3 id="data-">data-*å±æ€§</h3>
<blockquote>
<p>åŒä¸Š</p>
</blockquote>
<h3 id="heading-21">éæ ‡å‡†å±æ€§</h3>
<ul>
<li>å¯¹éæ ‡å‡†å±æ€§çš„ä¿®æ”¹ï¼Œåˆ™åªä¼šåœç•™åœ¨ JS çº¿ç¨‹ä¸­,ä¸ä¼šåŒæ­¥åˆ°é¡µé¢é‡Œ
<blockquote>
<p>æ¯”å¦‚å±æ€§: <a href="http://js.jirengu.com/zepiyucuxu/1/edit">ç¤ºä¾‹ä»£ç </a></p>
</blockquote>
</li>
</ul>
<h3 id="heading-22">å¯ç¤º</h3>
<ul>
<li>å¦‚æœä½ æœ‰è‡ªå®šä¹‰å±æ€§ï¼Œåˆæƒ³è¢«åŒæ­¥åˆ°é¡µé¢ä¸­ï¼Œè¯·ä½¿ç”¨<code>data-</code>ä½œä¸ºå‰ç¼€</li>
</ul>
<h3 id="heading-23">å›¾ç¤º</h3>
<p><img src="http://zhixiukang.com/images/%E6%88%AA%E5%B1%8F2020-04-2022.24.45.png" alt=""></p>
<blockquote>
<p>å·¦è¾¹çš„åœ¨<code>JS</code>é‡Œçš„å±æ€§ï¼Œå«åš<code>properties</code>ï¼Œå³è¾¹çš„åœ¨<code>HTML</code>é‡Œçš„å±æ€§ï¼Œå«åš<code>attributes</code>ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬<code>getAttributes()</code>è·å–çš„æ˜¯é¡µé¢ä¸­çš„å±æ€§ã€‚</p>
</blockquote>
<h2 id="property-vs-attribute">Property v.s. Attribute</h2>
<h3 id="property-">property å±æ€§</h3>
<ul>
<li>JS çº¿ç¨‹ä¸­ div1 å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œå«åš div1 çš„ property</li>
</ul>
<h3 id="attribute-">attribute ä¹Ÿæ˜¯å±æ€§</h3>
<ul>
<li>æ¸²æŸ“å¼•æ“ä¸­ div1 å¯¹åº”æ ‡ç­¾çš„å±æ€§ï¼Œå«åš attribute</li>
</ul>
<h3 id="heading-24">åŒºåˆ«</h3>
<ul>
<li>å¤§éƒ¨åˆ†æ—¶å€™ï¼ŒåŒåçš„ property å’Œ attribute å€¼ç›¸ç­‰</li>
<li>ä½†å¦‚æœä¸æ˜¯æ ‡å‡†å±æ€§ï¼ˆæŠŠ div1 æ”¾å…¥é¡µé¢ä¹‹ååªæœ‰æ ‡å‡†å±æ€§ä¼šåŒæ­¥ï¼‰ï¼Œé‚£ä¹ˆå®ƒä¿©åªä¼šåœ¨ä¸€å¼€å§‹æ—¶ç›¸ç­‰</li>
<li>ä½†æ³¨æ„ attribute åªæ”¯æŒå­—ç¬¦ä¸²</li>
<li>è€Œ property æ”¯æŒå­—ç¬¦ä¸²ã€å¸ƒå°”ç­‰ç±»å‹</li>
</ul>
<blockquote>
<p>ç½‘ä¸Šéƒ½è¯´ DOM æ“ä½œæ…¢ï¼Œå®é™…ä¸Šåªæ˜¯æ¯” JS æ“ä½œæ…¢ï¼ŒDOM æ“ä½œæ¯”ç½‘ç»œè¯·æ±‚è¿˜æ˜¯å¿«å¾ˆå¤šçš„ã€‚</p>
<p>å…³äºè¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œå»¶ä¼¸é˜…è¯»: <a href="https://stackoverflow.com/questions/6817093/but-whys-the-browser-dom-still-so-slow-after-10-years-of-effort">Whyâ€™s the browser DOM still so slow after 10 years of effort</a></p>
<p>æ³¨æ„ï¼Œç½‘ä¸Šçš„æ–‡ç« è¯´çš„ä¸ä¸€å®šéƒ½æ˜¯å¯¹çš„ï¼Œä½œä¸ºå‚è€ƒäº†è§£ä¸€ä¸‹å³å¯ã€‚</p>
</blockquote>
<blockquote>
<p>Q: çœ‹äº†è¿™ä¹ˆå¤šï¼ŒDOM é»˜è®¤çš„ API çœŸ ğŸ” å„¿éš¾ç”¨ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p>A: å¾ˆç®€å•ï¼Œè‡ªå·±å°è£…ä¸€ä¸ª DOM åº“ï¼Œè‡ªå·±è¯•ç€é€ ä¸€ä¸ª DOM è½®å­å§ :)</p>
<p>ä¹Ÿå¯ä»¥å‚è€ƒä¸‹:<a href="https://github.com/ZhixiuKang/dom-lib">æˆ‘å†™çš„ DOM è½®å­</a></p>
</blockquote>

    </div>

    <footer>
      


      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zhixiukang" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      
    </footer>
  </article>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" id="MathJax-script"></script>
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'], ['\\(', '\\)']
        ],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>
</section>

      </div>

      <footer class="footer">
  <section class="container">
    
     Â© 2020
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
